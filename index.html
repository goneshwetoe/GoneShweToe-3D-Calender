<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GoneShweToe ‚Äì Myanmar 3D Lottery Calendar</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<style>
:root{
  --brand:#2563eb;
}
body{
  font-family: system-ui,-apple-system,BlinkMacSystemFont;
}
.cell{
  transition:.15s ease;
}
.cell:active{
  transform:scale(1.08);
}
</style>
</head>

<body class="bg-slate-100 text-slate-900">

<!-- HEADER -->
<header class="sticky top-0 z-50 bg-white shadow">
  <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
    <div>
      <h1 class="text-xl font-black text-blue-600">GoneShweToe</h1>
      <p class="text-xs opacity-60">Myanmar 3D Lottery Calendar</p>
    </div>
    <button onclick="showAbout()" class="text-sm text-blue-600 font-semibold">About</button>
  </div>
</header>

<!-- MAIN -->
<main class="max-w-7xl mx-auto p-4 space-y-4">

  <!-- INSIGHT -->
  <section class="bg-white rounded-xl shadow p-4">
    <h2 class="font-bold mb-2 flex items-center gap-2">
      üìä Data Insight
    </h2>
    <div id="insight" class="text-sm space-y-1 opacity-80">
      Loading insight...
    </div>
  </section>

  <!-- TABLE -->
  <section class="bg-white rounded-xl shadow overflow-auto">
    <table class="border-collapse text-sm w-full">
      <thead class="bg-slate-50 sticky top-0 z-10">
        <tr id="yearRow">
          <th class="p-2 sticky left-0 bg-slate-50">Round</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </section>

</main>

<!-- FOOTER -->
<footer class="text-center text-xs opacity-60 p-4">
¬© 2025 GoneShweToe ‚Ä¢ Historical data only ‚Ä¢ User notes saved on this device
</footer>

<!-- ABOUT MODAL -->
<div id="about" class="fixed inset-0 bg-black/40 hidden items-center justify-center">
  <div class="bg-white rounded-xl p-5 max-w-sm w-full mx-4">
    <h3 class="font-bold mb-2">About GoneShweToe</h3>
    <p class="text-sm opacity-70 mb-3">
      This website provides historical Myanmar 3D lottery data for reference only.
      No prediction or guarantee is implied.
    </p>
    <p class="text-xs opacity-60">
      Your highlights & notes are stored locally on your device only.
    </p>
    <button onclick="hideAbout()" class="mt-4 w-full py-2 bg-blue-600 text-white rounded-lg">
      Close
    </button>
  </div>
</div>

<script>
/* ================= CONFIG ================= */
const DATA_URL = "./data/public_data.json";
const USER_KEY = "gst_user_data";

/* ================= STATE ================= */
let publicData = [];
let userData = JSON.parse(localStorage.getItem(USER_KEY) || "{}");

/* ================= INIT ================= */
fetch(DATA_URL)
  .then(r => r.json())
  .then(d => {
    publicData = d;
    build();
  });

/* ================= BUILD ================= */
function build(){
  const map = {};
  const allNumbers = [];

  publicData.forEach(d=>{
    const dt = new Date(d.date);
    const year = dt.getFullYear();
    const round = dt.getMonth()*2 + (dt.getDate()>1?1:0);
    if(!map[year]) map[year] = Array(24).fill("");
    map[year][round] = d.number;
    if(d.number) allNumbers.push(d.number);
  });

  const years = Object.keys(map);
  renderTable(map,years);
  renderInsight(allNumbers);
}

/* ================= TABLE ================= */
function renderTable(map,years){
  const yearRow = document.getElementById("yearRow");
  years.forEach(y=>{
    const th = document.createElement("th");
    th.className="p-2";
    th.textContent=y;
    yearRow.appendChild(th);
  });

  const body=document.getElementById("tableBody");
  body.innerHTML="";

  for(let r=0;r<24;r++){
    const tr=document.createElement("tr");
    tr.innerHTML=`<td class="p-2 sticky left-0 bg-white font-bold">${r+1}</td>`;

    years.forEach(y=>{
      const id=`${y}-${r}`;
      const num=map[y][r]||"";
      const u=userData[id]||{};
      const td=document.createElement("td");
      td.className="p-2 text-center cell cursor-pointer";
      td.style.background=u.color||"#f8fafc";
      td.textContent=num||"‚Äì";
      td.onclick=()=>editCell(id);
      tr.appendChild(td);
    });

    body.appendChild(tr);
  }
}

/* ================= USER DATA ================= */
function editCell(id){
  const note=prompt("Personal note (only on this device):",userData[id]?.note||"");
  if(note===null)return;
  const color=prompt("Highlight color (#f59e0b):",userData[id]?.color||"");
  userData[id]={note,color};
  localStorage.setItem(USER_KEY,JSON.stringify(userData));
  location.reload();
}

/* ================= INSIGHT ================= */
function renderInsight(nums){
  const freq={};
  nums.forEach(n=>{
    n.split("").forEach(d=>{
      freq[d]=(freq[d]||0)+1;
    });
  });

  const recent=nums.slice(-10);
  const hot=[...new Set(recent)].slice(0,5);
  const sorted=Object.entries(freq).sort((a,b)=>b[1]-a[1]);
  const cold=["0","1","2","3","4","5","6","7","8","9"]
    .filter(d=>!recent.join("").includes(d));

  document.getElementById("insight").innerHTML=`
    <div>üî• <b>Hot (recent):</b> ${hot.join(", ")||"-"}</div>
    <div>‚ùÑÔ∏è <b>Cold digits:</b> ${cold.join(", ")||"-"}</div>
    <div>üî¢ <b>Most frequent digit:</b> ${sorted[0]?.[0]||"-"}</div>
    <div class="pt-2 text-xs opacity-60">
      Insights are based on historical frequency only.
    </div>
  `;
}

/* ================= ABOUT ================= */
function showAbout(){
  document.getElementById("about").classList.remove("hidden");
  document.getElementById("about").classList.add("flex");
}
function hideAbout(){
  document.getElementById("about").classList.add("hidden");
}
</script>

</body>
</html>
